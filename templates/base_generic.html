<!DOCTYPE html>
<html lang="en">
<head>
  {% block title %}<title>Blog Application</title>{% endblock %}
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  {% load static %}
  <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>
<body>

 <nav class="navbar navbar-expand-sm navbar bg-dark">
  <div class="container">
    <a href="{% url 'blog_app:index' %}" class="navbar-brand">Blog App</a>
    <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-between" id="navbarCollapse">
      <div class="navbar-nav">
        <a href="{% url 'blog_app:index' %}" class="nav-item nav-link">Home</a>
        <a href="{% url 'blog_app:posts' %}" class="nav-item nav-link">All Posts</a>
        <a href="{% url 'blog_app:topics' %}" class="nav-item nav-link">All Topics</a>

          {% if request.user.is_authenticated %}
            <div class="navbar-nav ml-auto">
              <a href="{% url 'blog_users:profile' request.user.username %}"
              class="nav-item nav-link {% if request.user.username in request.path %}active{% endif %}">
              Profile
              </a>
              <a href="{% url 'blog_users:logout' %}" class="nav-item nav-link">Log Out</a>
            </div>
          {% else %}
            <div class="navbar-nav ml-auto">
              <a href="{% url 'blog_users:login' %}"
              class="nav-item nav-link {% if request.path == '/blog_users/login/' %}active{% endif %}">Log in</a>
              <a href="{% url 'blog_users:signup' %}"
              class="nav-item nav-link {% if request.path == '/blog_users/signup/' %}active{% endif %}">Sign up</a>
            </div>
          {% endif %}

          {% if request.user.is_authenticated %}
            <div class="navbar-nav ml-auto">
            <a href="{% url 'blog_app:post-create' %}"
            class="nav-item nav-link {% if request.path == '/post/create/' %}active{% endif %}">
            Create a post
            </a>
          {% endif %}

      </div>
    </div>
  </div>
 </nav>

 <!-- Messages -->
    {% for message in messages %}
        <div class="alert alert-{% if message.tags == 'error' %}danger{% else %}{{ message.tags }}{% endif %} alert-dismissible fade show">
            {{ message }}
            <button type="button" class="close" data-dismiss="alert">&times;</button>
        </div>
    {% endfor %}
<!-- /Messages -->

  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-2">

{% block sidebar %}
        <ul class="sidebar-nav">

            {% if user.is_authenticated %}
                <p>User:</p>
                <p>{{ user.username }}</p>
                <hr>
                <p><a href="{% url 'blog_app:my-posts' %}">My Posts</a></p>
            {% endif %}
       </ul>
       <br />
       <br />
       <br />
       <br />
       <h7><a href="{% url 'admin:index' %}">...admin/</a></h7>
      </div>
{% endblock %}

<div class="col-sm-10">

        {% block content %}
        {% endblock %}

      </div>
    </div>
  </div>

<!-- Pagination -->
{% block pagination %}
{% if is_paginated %}
  <div class="row">
    <nav class="col-lg-6 offset-lg-3 mt-4 d-flex justify-content-center">
      <ul class="pagination">

        {% if page_obj.has_previous %}
        <li class="page-item">
          <a class="page-link" href="?page={{ page_obj.previous_page_number }}">Previous</a>
        </li>
        {% else %}
        <li class="page-item disabled">
          <a class="page-link" href="#"">Previous</a>
        </li>
        {% endif %}

        {% for i in page_obj.paginator.page_range %}
        <li class=" page-item {% if page_obj.number == i %}active{% endif %}">
            <a class="page-link" href="?page={{ i }}">{{ i }}</a>
        </li>
        {% endfor %}

        {% if page_obj.has_next %}
        <li class="page-item">
          <a class="page-link" href="?page={{ page_obj.next_page_number }}">Next</a>
        </li>
        {% else %}
        <li class="page-item disabled">
          <a class="page-link" href="#">Next</a>
        </li>
        {% endif %}
      </ul>
    </nav>
  </div>
{% endif %}
{% endblock %}
<!-- /Pagination -->

</body>
</html>
